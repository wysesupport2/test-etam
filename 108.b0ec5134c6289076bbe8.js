(self.webpackChunketam_prime=self.webpackChunketam_prime||[]).push([[108],{78108:(e,t,o)=>{"use strict";o.r(t),o.d(t,{UploadModule:()=>_});var i=o(37160),n=o(2619),a=o(61116),s=o(16304),l=o(81888),r=o(35366),d=o(53887),c=o(42693),p=o(9017);let u=(()=>{class e{constructor(e,t){this.http=e,this.common=t,this.URL=d.T7+"Upload/"}uploadRegistrationExcel(e){let t=this.URL+"Employee_Registration?CID="+this.common.getCid();return this.http.post(t,e)}uploadTransactionData(e){let t=this.URL+"Transaction_Data?CID="+this.common.getCid()+"&LoginId="+this.common.getLocalStorage().LoginId;return this.http.post(t,e)}uploadVariableWeeklyOff(e){let t=this.URL+"Upload_Variable_Weekly_Off?CID="+this.common.getCid();return this.http.post(t,e)}uploadAdditionalWeeklyOff(e){let t=this.URL+"Upload_Additional_Weekly_Off?CID="+this.common.getCid();return this.http.post(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.eN),r.LFG(p.v))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=o(3492),h=o(37456),f=o(10091),m=o(92290);function y(e,t){if(1&e&&(r.TgZ(0,"option",9),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e),r.xp6(1),r.Oqu(e)}}function w(e,t){1&e&&(r.TgZ(0,"div"),r.TgZ(1,"div",10),r.TgZ(2,"div",11),r.TgZ(3,"h1",12),r._uU(4,"Upload"),r.qZA(),r.qZA(),r.TgZ(5,"div",11),r.TgZ(6,"ul"),r.TgZ(7,"li"),r.TgZ(8,"h4"),r._uU(9,"Select Upload Type "),r._UZ(10,"mdb-icon",13),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA())}function Z(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"h2",18),r._UZ(2,"mdb-icon",19),r._UZ(3,"br"),r._uU(4,"Drag and Drop Here "),r.qZA(),r.TgZ(5,"div",18),r.TgZ(6,"a",20),r._uU(7,"Download Format With Data"),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(3);r.xp6(6),r.Q6J("href",e.filedownloadpath,r.LSH)}}function x(e,t){if(1&e&&r.YNc(0,Z,8,1,"div",17),2&e){const e=r.oxw(2);r.Q6J("ngIf",e.showdragdrop)}}function v(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r._UZ(2,"br"),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.hij(" ",e," ")}}function U(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",21),r.TgZ(1,"div",22),r.TgZ(2,"div",23),r.YNc(3,v,3,1,"div",24),r.qZA(),r.TgZ(4,"div",25),r.TgZ(5,"button",26),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).downloadErrorList()}),r._uU(6,"Download Error List"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngForOf",e.successstring)}}function A(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"p-fileUpload",14),r.NdJ("uploadHandler",function(t){return r.CHM(e),r.oxw().myUploader(t)})("onSelect",function(){return r.CHM(e),r.oxw().showDragDrop()})("onRemove",function(){return r.CHM(e),r.oxw().showDragDrop()}),r.YNc(2,x,1,1,"ng-template",15),r.qZA(),r.YNc(3,U,7,1,"div",16),r.qZA()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("files",e.files)("customUpload",!0),r.xp6(2),r.Q6J("ngIf",e.showmessage)}}let T=(()=>{class e{constructor(e,t,o,i,n){this.upload=e,this.ngxuiloader=t,this.datepipe=o,this.common=i,this.toast=n,this.showmessage=!1,this.spinner=l.aS,this.selecteduploadtype="--Select Upload Type--",this.showdragdrop=!0,this.files=[],this.uploadtypes=["Employee Registration","Transaction Data","Variable Weekly Off","Additional Weekly Off"]}ngOnInit(){this.saveLog()}saveLog(){var e=this;return(0,s.Z)(function*(){let t={LoginId:e.common.getCid().toString(),Menu:"Upload"};(yield e.common.saveLog(t,"Menu")).subscribe(function(){var e=(0,s.Z)(function*(e){});return function(t){return e.apply(this,arguments)}}())})()}changeOption(e){this.selecteduploadtype=e.target.value,"Employee Registration"==this.selecteduploadtype?this.filedownloadpath="../../../../assets/New_employee_registration_format.xls":"Transaction Data"==this.selecteduploadtype?this.filedownloadpath="../../../../assets/UploadTransactionData.xls":"Variable Weekly Off"==this.selecteduploadtype?this.filedownloadpath="../../../../assets/VariableWeeklyoff.xls":"Additional Weekly Off"==this.selecteduploadtype&&(this.filedownloadpath="../../../../assets/AdditionalWeeklyoff.xls")}showDragDrop(){this.showdragdrop=!this.showdragdrop}myUploader(e){var t=this;const o=e.files[0],i=new FormData;i.append("file",o),this.ngxuiloader.start(),this.common.insertLog("Upload/-"+this.selecteduploadtype),"Employee Registration"==this.selecteduploadtype?this.upload.uploadRegistrationExcel(i).subscribe(function(){var e=(0,s.Z)(function*(e){let o=yield e;t.ngxuiloader.stop(),t.files=[],t.showdragdrop=!0,t.showmessage=!0,1==o.errorcode?t.successstring=null!=o.data&&0!=o.data.length?o.data:o.errormessage:t.toast.warning("Error while uploading the Excel File.Kindly Check excel once.")});return function(t){return e.apply(this,arguments)}}(),e=>{let t={Exception:e.message,id:this.common.getLocalStorage().LoginId,Api:"Upload Employee Registration"};this.common.saveLog(t,"ApiException")}):"Transaction Data"==this.selecteduploadtype?this.upload.uploadTransactionData(i).subscribe(function(){var e=(0,s.Z)(function*(e){let o=yield e;t.ngxuiloader.stop(),t.files=[],t.showdragdrop=!0,t.showmessage=!0,1==o.errorcode?t.successstring=null!=o.data&&0!=o.data.length?o.data:o.errormessage:t.toast.warning("Error while uploading the Excel File.Kindly Check excel once.")});return function(t){return e.apply(this,arguments)}}(),e=>{let t={Exception:e.message,id:this.common.getLocalStorage().LoginId,Api:"Upload Transaction Data"};this.common.saveLog(t,"ApiException")}):"Variable Weekly Off"==this.selecteduploadtype?this.upload.uploadVariableWeeklyOff(i).subscribe(function(){var e=(0,s.Z)(function*(e){let o=yield e;t.ngxuiloader.stop(),t.files=[],t.showdragdrop=!0,t.showmessage=!0,1==o.errorcode?t.successstring=null!=o.data&&0!=o.data.length?o.data:o.errormessage:t.toast.warning("Error while uploading the Excel File.Kindly Check excel once.")});return function(t){return e.apply(this,arguments)}}(),e=>{let t={Exception:e.message,id:this.common.getLocalStorage().LoginId,Api:"Upload Variable Weekly Off"};this.common.saveLog(t,"ApiException")}):"Additional Weekly Off"==this.selecteduploadtype&&this.upload.uploadAdditionalWeeklyOff(i).subscribe(function(){var e=(0,s.Z)(function*(e){let o=yield e;t.ngxuiloader.stop(),t.files=[],t.showdragdrop=!0,t.showmessage=!0,1==o.errorcode?t.successstring=null!=o.data&&0!=o.data.length?o.data:o.errormessage:t.toast.warning("Error while uploading the Excel File.Kindly Check excel once.")});return function(t){return e.apply(this,arguments)}}(),e=>{let t={Exception:e.message,id:this.common.getLocalStorage().LoginId,Api:"Upload Additional Weekly off"};this.common.saveLog(t,"ApiException")})}handleReaderLoaded(e){}downloadErrorList(){let e="";for(let n of this.successstring)e+=n+"\r\n";const t=new Blob([e],{type:"text/plain"}),o=this.selecteduploadtype+this.datepipe.transform(new Date,"ddMMyyyy")+".txt";let i=document.createElement("a");i.download=o,null!=window.webkitURL?i.href=window.webkitURL.createObjectURL(t):(i.href=window.URL.createObjectURL(t),i.style.display="none",document.body.appendChild(i)),i.click()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(u),r.Y36(l.LA),r.Y36(a.uU),r.Y36(p.v),r.Y36(g._W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-upload"]],decls:10,vars:5,consts:[[3,"fgsColor","fgsType"],[1,"mt-2","p-4"],[1,"col-sm-12","mb-2"],["appHeading","",1,"py-3","text-center",2,"font-size","large","width","100%",3,"change"],["value","--Select Upload Type--","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"value"],[1,"container","mt-5","p-2"],[1,"d-flex","justify-content-center"],[1,"text-primary"],["fas","","icon","arrow-up"],["name","myfile[]","accept",".xls","mode","advanced",3,"files","customUpload","uploadHandler","onSelect","onRemove"],["pTemplate","content"],["class","mt-2",4,"ngIf"],[4,"ngIf"],[1,"col-sm-12","d-flex","justify-content-center"],["fas","","icon","file-excel","size","5x","aria-hidden","true",1,"green-text","pr-3"],["mdbBtn","","appHeading","","download","",1,"buttonhover",3,"href"],[1,"mt-2"],[1,"row"],[1,"col-sm-8"],[4,"ngFor","ngForOf"],[1,"col-sm-4"],["mdbBtn","","appHeading","",1,"buttonhover",3,"click"]],template:function(e,t){1&e&&(r._UZ(0,"ngx-ui-loader",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"Select",3),r.NdJ("change",function(e){return t.changeOption(e)}),r.TgZ(4,"option",4),r._uU(5,"--Select Upload Type--"),r.qZA(),r.YNc(6,y,2,2,"option",5),r.qZA(),r.qZA(),r.TgZ(7,"div",6),r.YNc(8,w,11,0,"div",7),r.YNc(9,A,4,3,"div",8),r.qZA(),r.qZA()),2&e&&(r.Q6J("fgsColor","white")("fgsType",t.spinner.rectangleBouncePulseOut),r.xp6(6),r.Q6J("ngForOf",t.uploadtypes),r.xp6(1),r.Q6J("ngSwitch",t.selecteduploadtype),r.xp6(1),r.Q6J("ngSwitchCase","--Select Upload Type--"))},directives:[l.Jj,h.d,a.sg,a.RF,a.n9,a.ED,n.Ui,n.XI,f.p,m.jx,a.O5,n.mT],styles:["[_nghost-%COMP%]     .p-message-custom{background-color:#e1cfe7;border:solid #8a427a;border-width:0 0 0 6px;color:#2c1e30}[_nghost-%COMP%]     .p-message-close-icon{color:#2c1e30}"]}),e})();var b=o(68003);const L=[{path:"",component:T}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[b.Bz.forChild(L)],b.Bz]}),e})();o(31041);let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[a.ez]]}),e})();var C=o(41956);let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[a.uU],imports:[[a.ez,k,n.yi.forRoot(),f.O,E,l.Js,l.Cz.forRoot({showForeground:!0}),C.$,i.o]]}),e})()}}]);